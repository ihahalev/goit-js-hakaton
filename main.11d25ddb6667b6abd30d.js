(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/wio":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<header class="header-container header">\r\n  <div class="header-wrapper">\r\n    <div class="header-titlebox">\r\n      <div class="header-titlebox__img"></div>\r\n      <h1 class="header-titlebox__title">Filmoteka</h1>\r\n    </div>\r\n    <ul class="header-list">\r\n      <li class="header-list__item home">home</li>\r\n      <li class="header-list__item my-lib">my library</li>\r\n    </ul>\r\n  </div>\r\n</header>'},useData:!0})},"0HMw":function(e,t,n){},QRgu:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<ul class="movie_list" id="js-list"></ul>'},useData:!0})},QfWi:function(e,t,n){"use strict";n.r(t);n("IvQZ"),n("uQK7"),n("WB5j"),n("Muwe"),n("4NM0"),n("X5mX"),n("fp7Y");var a={home:"/",library:"/library",libWatched:"/watched",libQueue:"/queue",id:null,details:"",get movieID(){return this.id},set movieID(e){this.id=Number(e),this.details="/id"+this.id},get movieDetails(){return this.details},set movieDetails(e){this.id=Number(e),this.details="/id"+this.id}},i=n("czhI"),l=n.n(i);l.a.defaults.baseURL="https://api.themoviedb.org/3";var r="676b050b9e1ae3ff4b7bb472f439b690",o={page:1,total_pages:null,query:"",fetchMoviesPopularDay:function(){return l.a.get("/trending/movie/day?page="+this.page+"&api_key="+r).then((function(e){return e.data}))},fetchMoviesWithQuery:function(){return l.a.get("/search/movie?query="+this.query+"&api_key="+r+"&page="+this.page).then((function(e){return e.data}))},fetchMovieDetails:function(e){return l.a.get("/movie/"+e+"?api_key="+r).then((function(e){return e.data}))},get searchQuery(){return this.query},set searchQuery(e){this.query=encodeURIComponent(e)},get totalPages(){return this.total_pages},set totalPages(e){this.total_pages=Number(e)},incrementPage:function(){this.page!==this.total_pages&&(this.page+=1)},decrementPage:function(){1!==this.page&&(this.page-=1)},set currentPage(e){this.page=Number(e)},get currentPage(){return this.page},IMG_SERVER:"https://image.tmdb.org/t/p/w500"},s=n("NWgQ"),c=n.n(s);n("8cZI"),n("lmye"),n("+XsM"),n("ZEAQ"),n("wCa+");var u=n("b/Mu"),d=n.n(u),p=(n("hi3g"),n("lYjL"),n("lAJ5"),n("QJ3N"));n("bzha"),n("zrP5");p.defaults.width="400px";var m=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){p.error({text:"Set error: "+e})}},h=function(e){try{var t=localStorage.getItem(e);return t&&void 0!==t?JSON.parse(t):[]}catch(e){p.error({text:"Get error: "+e})}},v="watched",b="queue",f=n("SzgL"),_=n.n(f);p.defaults.width="400px";var g=function(e,t){var n={data:{}};function i(){var e=h(v),n=h(b),a={btnWatched:document.querySelector("#btnWatched"),btnQueue:document.querySelector("#btnQueue")};a.btnWatched.addEventListener("click",l),a.btnQueue.addEventListener("click",r),e.some((function(e){return e.id===t}))?(a.btnWatched.textContent="Delete from watched",a.btnWatched.classList.add("movie-details__btn-remove")):(a.btnWatched.textContent="Add to watched",a.btnWatched.classList.remove("movie-details__btn-remove")),n.some((function(e){return e.id===t}))?(a.btnQueue.textContent="Delete from queue",a.btnQueue.classList.add("movie-details__btn-remove")):(a.btnQueue.textContent="Add to queue",a.btnQueue.classList.remove("movie-details__btn-remove"))}function l(){!function(e,t){var n=h(v);if(n.some((function(t){return t.id===e}))){var a=n.filter((function(t){return t.id!==e}));m(v,a)}else{var i=t.backdrop_path,l=t.title,r=t.vote_average,o=t.release_date;m(v,[].concat(n,[{id:e,backdrop_path:i,title:l,vote_average:r,release_date:o}]))}}(t,n.data),i()}function r(){!function(e,t){var n=h(b);if(n.some((function(t){return t.id===e}))){var a=n.filter((function(t){return t.id!==e}));m(b,a)}else{var i=t.backdrop_path,l=t.title,r=t.vote_average,o=t.release_date;m(b,[].concat(n,[{id:e,backdrop_path:i,title:l,vote_average:r,release_date:o}]))}}(t,n.data),i()}a.movieID=t,history.pushState(null,null,a.movieDetails),o.fetchMovieDetails(t).then((function(t){var a;a=t,e.innerHTML=_()(Object.assign({},a,{vote_average:a.vote_average.toFixed(1)})),i(),n.data=Object.assign({},t)})).catch((function(e){p.error({text:"Some trubles: "+e})}))};var y=function(e){var t=document.getElementById("root"),n=document.getElementById("js-list");n.innerHTML=e.map((function(e){return function(e){var t=Object.assign({},e,{release_date:Number.parseInt(e.release_date),vote_average:e.vote_average.toFixed(1)});return d()(t)}(e)})).join(""),n.addEventListener("click",(function(e){if(NaN!==e.target.parentElement.parentElement.id&&""!==e.target.parentElement.parentElement.id){var n=e.target.parentElement.parentElement.id;g(t,n),history.pushState(null,null,"/id"+n)}}))},P=n("QRgu"),w=n.n(P),x=n("pRpY"),k=n.n(x);p.defaults.width="400px";function L(e){e.pageNumber.textContent=o.currentPage,o.searchQuery?(history.pushState(null,null,location.pathname+"?page="+o.currentPage),o.fetchMoviesWithQuery().then((function(e){y(e.results)})).catch((function(e){p.error({text:"Some trubles: "+e})}))):(history.pushState(null,null,location.pathname+"?page="+o.currentPage),o.fetchMoviesPopularDay().then((function(e){y(e.results)})).catch((function(e){p.error({text:"Some trubles: "+e})})))}function Q(){var e={btnPrev:document.querySelector('[data-action="btn_prev"]'),btnNext:document.querySelector('[data-action="btn_next"]'),pageNumber:document.querySelector(".pagination_page")};return o.currentPage>1&&e.btnPrev.classList.remove("pagination_btn--opacity"),o.currentPage===o.total_pages&&e.btnNext.classList.add("pagination_btn--opacity"),1===o.currentPage&&e.btnPrev.classList.add("pagination_btn--opacity"),o.currentPage<o.total_pages&&e.btnNext.classList.remove("pagination_btn--opacity"),e.pageNumber.textContent=o.currentPage,e}var S=function(e){e.innerHTML='\n  <div class="section_pagination">\n    <form type="submit" class="SearchForm js-form">\n    <button type="submit" class="SearchForm-button">\n  </button>\n    <input type="text" class="SearchForm-input" placeholder="Write movie name and click Enter" name="query" autoFocus />\n    </form>\n    </div>'+w()(),document.querySelector(".js-form").addEventListener("submit",j),o.searchQuery?o.fetchMoviesWithQuery().then((function(e){o.totalPages=e.total_pages,y(e.results)})):o.fetchMoviesPopularDay().then((function(e){o.totalPages=e.total_pages,y(e.results)})),function(e){e.insertAdjacentHTML("beforeend",k()(o.currentPage));var t=Q();t.btnNext.addEventListener("click",(function(){if(t.btnNext.classList.contains("pagination_btn--opacity"))return;o.currentPage>=1&&t.btnPrev.classList.remove("pagination_btn--opacity");o.currentPage+1===o.total_pages&&t.btnNext.classList.add("pagination_btn--opacity");o.incrementPage(),L(t)})),t.btnPrev.addEventListener("click",(function(){if(t.btnPrev.classList.contains("pagination_btn--opacity"))return;o.currentPage-1==1&&t.btnPrev.classList.add("pagination_btn--opacity");o.currentPage<=o.total_pages&&t.btnNext.classList.remove("pagination_btn--opacity");o.decrementPage(),L(t)})),o.searchQuery?o.fetchMoviesWithQuery().then((function(e){y(e.results)})).catch((function(e){p.error({text:"Some trubles: "+e})})):o.fetchMoviesPopularDay().then((function(e){y(e.results)})).catch((function(e){p.error({text:"Some trubles: "+e})}))}(e)};function j(e){e.preventDefault(),o.currentPage=1,o.searchQuery=e.currentTarget.elements.query.value,e.currentTarget.elements.query.value="",history.pushState(null,null,location.pathname+"?query="+o.searchQuery+"&page="+o.currentPage);var t=Q();o.fetchMoviesWithQuery(o.searchQuery).then((function(e){o.totalPages=e.total_pages,y(e.results),L(t)}))}var q=n("zYp7"),E=n.n(q);function M(e){e.innerHTML=""+E()()+w()(),p.defaults.width="400px";var t=location.pathname,n=h(v),i=h(b),l={btnWatched:document.querySelector("#js-btnWatched"),btnQueue:document.querySelector("#js-btnQueue"),listContainer:document.querySelector("#js-list-container")},r=function(){if(0!==n.length)try{y(n)}catch(e){p.error({text:"Something went wrong"})}else p.info({text:"Unfortunately, Your list of watched movies is empty. Add to Your collection of watched!"})},o=function(){if(0!==i.length)try{y(i)}catch(e){p.error({text:"Something went wrong"})}else p.info({text:"Unfortunately, Your list of movies in queue is empty. Add to Your in queue collection!"})},s=function(){l.btnWatched.classList.add("libraryPage__active-button"),l.btnQueue.classList.contains("libraryPage__active-button")&&l.btnQueue.classList.remove("libraryPage__active-button")},c=function(){l.btnQueue.classList.add("libraryPage__active-button"),l.btnWatched.classList.contains("libraryPage__active-button")&&l.btnWatched.classList.remove("libraryPage__active-button")};switch(l.btnWatched.addEventListener("click",(function(e){s(),history.pushState(null,null,a.libWatched),r()})),l.btnQueue.addEventListener("click",(function(e){c(),history.pushState(null,null,a.libQueue),o()})),t){case a.libWatched:s(),r();break;case a.libQueue:c(),o();break;default:S(e)}}var W=n("/wio"),D=n.n(W),N=n("dk2T"),O=n.n(N),I=n("YuqO"),C=n.n(I);n("0HMw");function Y(){return location.pathname}!function(){var e,t=document.querySelector("body"),n=document.getElementById("root"),i=(e=location.search,c.a.parse(e)),l=i.query,r=i.page;l&&(o.searchQuery=l,o.currentPage=r);var s=Y();switch(s){case a.home:S(n),history.pushState(null,null,a.home);break;case a.libWatched:M(n),history.pushState(null,null,a.libWatched);break;case a.libQueue:M(n),history.pushState(null,null,a.libQueue);break;default:if(s.includes("id")){var u=s.indexOf("id")+2,d=s.slice(u,s.length);if(d){g(n,d),history.replaceState(null,null,"/id"+d);break}}history.replaceState(null,null,a.home),S(n)}!function(e){var t=D()();e.insertAdjacentHTML("afterbegin",t);var n=document.getElementById("root"),i=document.querySelector(".home"),l=document.querySelector(".my-lib");switch(location.pathname){case a.home:i.classList.add("header-list__item--active");break;case a.libWatched:case a.libQueue:l.classList.add("header-list__item--active")}i.addEventListener("click",(function(){l.classList.remove("header-list__item--active"),i.classList.add("header-list__item--active"),o.searchQuery="",o.currentPage=1,history.pushState(null,null,a.home),S(n)})),l.addEventListener("click",(function(){i.classList.remove("header-list__item--active"),l.classList.add("header-list__item--active"),history.pushState(null,null,a.libWatched),M(n)}))}(t),function(e){var t,n=C()();e.insertAdjacentHTML("beforeend",n),t=document.querySelector(".back-to-top"),window.addEventListener("scroll",(function(){var e=window.pageYOffset,n=document.documentElement.clientHeight;e>n&&t.classList.add("back-to-top-show"),e<n&&t.classList.remove("back-to-top-show")})),t.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-10),setTimeout(e,0))}))}(t),function(e){var t=O()();e.insertAdjacentHTML("beforeend",t)}(t),onpopstate=function(e){Y()}}()},SzgL:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <span>"+e.escapeExpression(e.lambda(null!=t?l(t,"name"):t,t))+", </span>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<section class="movie-details">\r\n  <div class="movie-details__wrapper">\r\n    <img src="https://image.tmdb.org/t/p/w500'+u(typeof(r=null!=(r=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?r:s)===c?r.call(o,{name:"poster_path",hash:{},data:i,loc:{start:{line:3,column:45},end:{line:3,column:60}}}):r)+'" alt="'+u(typeof(r=null!=(r=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?r:s)===c?r.call(o,{name:"original_title",hash:{},data:i,loc:{start:{line:3,column:67},end:{line:3,column:85}}}):r)+'" width="500"\r\n      class="movie-details__image">\r\n  </div>\r\n  <div class="movie-details__wrapper">\r\n    <h2 class="movie-details__title">'+u(typeof(r=null!=(r=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?r:s)===c?r.call(o,{name:"original_title",hash:{},data:i,loc:{start:{line:7,column:37},end:{line:7,column:55}}}):r)+'</h2>\r\n    <ul class="movie-details-list">\r\n      <li class="movie-details-list__item">\r\n        <span class="movie-details-list__item-content">Vote / Votes</span>\r\n        <span class="movie-details-list__item-content">'+u(typeof(r=null!=(r=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?r:s)===c?r.call(o,{name:"vote_average",hash:{},data:i,loc:{start:{line:11,column:55},end:{line:11,column:71}}}):r)+"/"+u(typeof(r=null!=(r=d(n,"vote_count")||(null!=t?d(t,"vote_count"):t))?r:s)===c?r.call(o,{name:"vote_count",hash:{},data:i,loc:{start:{line:11,column:72},end:{line:11,column:86}}}):r)+'</span>\r\n      </li>\r\n      <li class="movie-details-list__item">\r\n        <span class="movie-details-list__item-content">Popularity</span>\r\n        <span class="movie-details-list__item-content">'+u(typeof(r=null!=(r=d(n,"popularity")||(null!=t?d(t,"popularity"):t))?r:s)===c?r.call(o,{name:"popularity",hash:{},data:i,loc:{start:{line:15,column:55},end:{line:15,column:69}}}):r)+'</span>\r\n      </li>\r\n      <li class="movie-details-list__item">\r\n        <span class="movie-details-list__item-content">Original title</span>\r\n        <span class="movie-details-list__item-content">'+u(typeof(r=null!=(r=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?r:s)===c?r.call(o,{name:"original_title",hash:{},data:i,loc:{start:{line:19,column:55},end:{line:19,column:73}}}):r)+'</span>\r\n      </li>\r\n      <li class="movie-details-list__item">\r\n        <span class="movie-details-list__item-content">Genre</span>\r\n        <span class="movie-details-list__item-content">\r\n'+(null!=(l=d(n,"each").call(o,null!=t?d(t,"genres"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:24,column:10},end:{line:26,column:19}}}))?l:"")+'        </span>\r\n      </li>\r\n    </ul>\r\n    <h2 class="movie-details__title">About</h2>\r\n    <p class="movie-details__description">'+u(typeof(r=null!=(r=d(n,"overview")||(null!=t?d(t,"overview"):t))?r:s)===c?r.call(o,{name:"overview",hash:{},data:i,loc:{start:{line:31,column:42},end:{line:31,column:54}}}):r)+'</p>\r\n    <div class="wrapper-btn">\r\n      <button type="button" data-action="watched" id="btnWatched" class="movie-details__btn">Add to watched</button>\r\n      <button type="button" data-action="queue" id="btnQueue" class="movie-details__btn">Add to queue</button>\r\n    </div>\r\n  </div>\r\n</section>'},useData:!0})},YuqO:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="back-to-top">\r\n  <a class="back-to-top__link" title="Наверх"></a>\r\n</div>'},useData:!0})},"b/Mu":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,r=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <img src="https://image.tmdb.org/t/p/w500/'+s("function"==typeof(l=null!=(l=c(n,"backdrop_path")||(null!=t?c(t,"backdrop_path"):t))?l:o)?l.call(r,{name:"backdrop_path",hash:{},data:i,loc:{start:{line:4,column:46},end:{line:4,column:63}}}):l)+'" alt="'+s("function"==typeof(l=null!=(l=c(n,"title")||(null!=t?c(t,"title"):t))?l:o)?l.call(r,{name:"title",hash:{},data:i,loc:{start:{line:4,column:70},end:{line:4,column:79}}}):l)+'" class="movie__poster" />\r\n'},3:function(e,t,n,a,i){var l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <img src='https://www.flicks.co.nz/img/placeholders/landscape-placeholder.jpg' alt=\""+e.escapeExpression("function"==typeof(l=null!=(l=r(n,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:i,loc:{start:{line:6,column:88},end:{line:6,column:97}}}):l)+'"\r\n      class="movie__poster-placeholder" />\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li id="+c("function"==typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:s)?r.call(o,{name:"id",hash:{},data:i,loc:{start:{line:1,column:7},end:{line:1,column:13}}}):r)+' class="movie__item">\r\n  <div class="movie__card">\r\n'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"backdrop_path"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:4},end:{line:8,column:11}}}))?l:"")+'    <p class="movie__name">'+c("function"==typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:s)?r.call(o,{name:"title",hash:{},data:i,loc:{start:{line:9,column:27},end:{line:9,column:36}}}):r)+" ("+c("function"==typeof(r=null!=(r=u(n,"release_date")||(null!=t?u(t,"release_date"):t))?r:s)?r.call(o,{name:"release_date",hash:{},data:i,loc:{start:{line:9,column:38},end:{line:9,column:54}}}):r)+')</p>\r\n    <div class="movie__rate-container">\r\n      <p class="movie__rate">'+c("function"==typeof(r=null!=(r=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?r:s)?r.call(o,{name:"vote_average",hash:{},data:i,loc:{start:{line:11,column:29},end:{line:11,column:45}}}):r)+"</p>\r\n    </div>\r\n  </div>\r\n</li>"},useData:!0})},dk2T:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<footer class="footer-container footer">\r\n    <div class="footer-wrapper">\r\n        <p class=\'footer-title\'>Made by Dinasaurs</p>\r\n    </div>\r\n</footer>'},useData:!0})},pRpY:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="section_pagination">\r\n  <div class="pagination_container">\r\n    <button class="pagination_box--style pagination_btn--prev pagination_btn--opacity"\r\n      data-action="btn_prev">Prev</button>\r\n    <span class="pagination_box--style pagination_page" data-info="page_number">'+e.escapeExpression("function"==typeof(l=null!=(l=r(n,"page")||(null!=t?r(t,"page"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"page",hash:{},data:i,loc:{start:{line:5,column:80},end:{line:5,column:88}}}):l)+'</span>\r\n    <button class="pagination_box--style pagination_btn--next" data-action="btn_next">Next</button>\r\n  </div>\r\n</div>'},useData:!0})},zYp7:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="libraryPage__container">\r\n  <ul class="libraryPage__buttons">\r\n    <li>\r\n      <button type="button" name="watched" id="js-btnWatched" class="libraryPage__button">Watched</button>\r\n    </li>\r\n    <li>\r\n      <button type="button" name="queue" id="js-btnQueue" class="libraryPage__button">Queue</button>\r\n    </li>\r\n  </ul>\r\n</div>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.11d25ddb6667b6abd30d.js.map